add_executable(unit-test unit-test.cpp)
if (OPENGL_FOUND)
    target_compile_definitions(unit-test PRIVATE HAS_OPENGL=1)
endif()
target_link_libraries(unit-test PRIVATE random-graphics)

function(add_gl_app target source)
    if (Qt6Widgets_FOUND)
        add_executable(${target} ${source})
        target_link_libraries(${target} random-graphics Qt::Widgets)
    elseif (Qt5Widgets_FOUND)
        add_executable(${target} ${source})
        target_link_libraries(${target} random-graphics Qt5::Widgets)
    endif()
endfunction()

if (OPENGL_FOUND)
    add_gl_app(qopengl-test qopengl-test.cpp)
endif()

